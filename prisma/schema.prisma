generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Booking {
  id         Int           @id @default(autoincrement())
  tattoo     String
  artistId   Int
  datetime   DateTime
  email      String
  name       String
  status     BookingStatus @default(Nuovo)
  bodyImage  String?
  phone      String?
  references String[]      @default([])
  skinTone   String?
  palette    TattooPalette @default(COLORI)
  artist     Artist        @relation(fields: [artistId], references: [id])

  @@index([datetime])
  @@index([artistId, datetime])
}

model Artist {
  id        Int       @id @default(autoincrement())
  name      String
  bio       String?
  avatarUrl String?
  instagramUrl String?
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  bookings  Booking[]
  works     Work[]
}

model Work {
  id        Int      @id @default(autoincrement())
  artistId  Int
  title     String?
  mediaUrl  String
  createdAt DateTime @default(now())
  artist    Artist   @relation(fields: [artistId], references: [id], onDelete: Cascade)

  @@index([artistId])
}

enum BookingStatus {
  Nuovo
  Confermato
  Fatto
}

enum TattooPalette {
  BIANCO_NERO
  COLORI
}
